webpackJsonp([1],{"2Rux":function(t,e){},"2wZh":function(t,e){},"4EOe":function(t,e){},IuiO:function(t,e){},NHnr:function(t,e,a){"use strict";function s(t,e){var a=t||"",s=e||"";return a=a.trim(),s=s.trim(),a||s?""!==a||r()(s)?void 0===a||""===a?(I.dispatch("setAlert","Enter valid username!"),!1):void 0===s||""===s?(I.dispatch("setAlert","Email field must not be empty!"),!1):r()(s)?!!a.trim()&&!!s.trim()&&r()(s):(I.dispatch("setAlert","Provide a valid email address!"),!1):(I.dispatch("setAlert","Empty name field and invalid email address!"),!1):(I.dispatch("setAlert","Enter a valid name and email address!"),!1)}Object.defineProperty(e,"__esModule",{value:!0});a("j1ja");var n=a("/5sW"),i=a("2LX0"),r=a.n(i),o=a("mvHQ"),l=a.n(o),u=a("Xxa5"),c=a.n(u),m=a("exGp"),d=a.n(m),h=a("NYxO"),_=a("mtWM"),g=a.n(_).a.create({baseURL:"http://localhost:5000/api"}),f=g,p=a("rdLu"),v=a.n(p),b=a("v/L+"),C=a.n(b);n.a.use(h.a);var A=new C.a({key:"vuex",storage:window.localStorage,reducer:function(t){return{authorizedUser:t.authorizedUser}}}),I=new h.a.Store({plugins:[A.plugin],state:{authorizedUser:null,users:null,albums:null,userAlbums:null,images:null,currentUser:null,currentAlbum:null,currentPaginatePage:null,searchTerm:"",loading:!1,alert:""},mutations:{logInUser:function(t,e){t.authorizedUser=e},setUsers:function(t,e){t.users=e},setAlbums:function(t,e){t.albums=e},setUserAlbums:function(t,e){t.userAlbums=e},setImages:function(t,e){t.images=e},setCurrentUser:function(t,e){t.currentUser=e},setCurrentAlbum:function(t,e){t.currentAlbum=e},setSearchTerm:function(t,e){t.searchTerm=e},setCurrentPaginatePage:function(t,e){t.currentPaginatePage=e},deleteImage:function(t,e){t.images.filter(function(t){return t.id===e.id})},loading:function(t,e){t.loading=e},alert:function(t,e){t.alert=e}},actions:{fetchUsers:function(t){var e=this,a=t.commit;return d()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("loading",!0),t.next=3,f.get("/users").then(function(t){a("setUsers",t.data),a("loading",!1)}).catch(function(t){a("loading",!1),console.log(t)});case 3:case"end":return t.stop()}},t,e)}))()},fetchUserAlbum:function(t,e){var a=this,s=t.commit;return d()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s("loading",!0),t.next=3,f.get("/albums?userId="+e).then(function(t){s("setUserAlbums",t.data),s("loading",!1)}).catch(function(t){s("loading",!1),console.log(t)});case 3:case"end":return t.stop()}},t,a)}))()},fetchAllAlbums:function(t){var e=this,a=t.commit;return d()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a("loading",!0),t.next=3,f.get("/albums").then(function(t){a("setAlbums",t.data),a("loading",!1)}).catch(function(t){a("loading",!1),console.log(t)});case 3:case"end":return t.stop()}},t,e)}))()},fetchAlbumImages:function(t,e){var a=this,s=t.commit;return d()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s("loading",!0),t.next=3,f.get("/photos/?albumId="+e).then(function(t){s("setImages",t.data),s("loading",!1)}).catch(function(t){s("loading",!1),console.log(t)});case 3:case"end":return t.stop()}},t,a)}))()},fetchAllImages:function(t,e){var a=this,s=t.commit;return d()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s("loading",!0),t.next=3,f.get("/photos/").then(function(t){s("setImages",t.data),s("loading",!1)}).catch(function(t){s("loading",!1),console.log(t)});case 3:case"end":return t.stop()}},t,a)}))()},setCurrentUser:function(t,e){(0,t.commit)("setCurrentUser",e)},setCurrentAlbum:function(t,e){(0,t.commit)("setCurrentAlbum",e)},resetCurrentData:function(t){var e=t.commit;e("setCurrentAlbum",null),e("setCurrentUser",null)},deleteImage:function(t,e){var a=t.commit,s=t.dispatch;a("loading",!0),f.delete("/photos/"+e.id).then(function(){e.albumId?s("fetchAlbumImages",e.albumId):s("fetchAllImages"),a("loading",!1)}).catch(function(t){a("loading",!1),console.log(t)})},deleteAlbum:function(t,e){var a=t.commit,s=t.dispatch;a("loading",!0),f.delete("/albums/"+e.albumId).then(function(){e.userId&&s("fetchUserAlbum",e.userId),a("loading",!1),alert("Album succesfully deleted!")}).catch(function(t){a("loading",!1),console.log(t)})},currentPaginatePage:function(t,e){(0,t.commit)("setCurrentPaginatePage",e)},authorize:function(t,e){var a=t.commit,s=t.dispatch;a("logInUser",e),localStorage.setItem("guestUser",l()(e)),s("setSessionTime")},clearUser:function(t){(0,t.commit)("logInUser",null),localStorage.removeItem("guestUser")},setSessionTime:function(t){var e=t.commit;setTimeout(function(){e("logInUser",null)},36e5)},searchTerm:function(t,e){(0,t.commit)("setSearchTerm",e)},setAlert:function(t,e){(0,t.commit)("alert",e)}},getters:{users:function(t){if(t.users)return t.users},currentUser:function(t){return t.currentUser},currentAlbum:function(t){return t.currentAlbum?t.currentAlbum:{}},userAlbums:function(t){return t.userAlbums},albums:function(t){return t.albums?t.albums:[]},images:function(t){return t.images?t.images:[]},randomImages:function(t){return v.a.shuffle(t.images).slice(0,100)},loading:function(t){return t.loading},searchedAlbum:function(t,e){var a=e.albums,s=e.userAlbums,n=t.currentUser?s:t.currentAlbum?s:a;if(t.searchTerm){var i=new RegExp(t.searchTerm.trim().toLowerCase().replace(/\s+/g,"|"));return n.filter(function(t){return-1!==t.title.toLowerCase().search(i)})}return n},currentPaginatePage:function(t){return t.currentPaginatePage},authorizedUser:function(t){return t.authorizedUser},alert:function(t){return t.alert}}}),w={props:["hideMenu"],data:function(){return{showDialog:!1,menuHidden:!0,user:{}}},computed:{authorizedUser:function(){return this.$store.state.authorizedUser},alert:function(){return this.$store.getters.alert}},watch:{hideMenu:function(t){this.menuHidden=this.hideMenu}},methods:{resetCurrent:function(){this.$store.dispatch("resetCurrentData"),localStorage.removeItem("userId"),localStorage.removeItem("albumId")},login:function(){this.user.name="",this.user.email="",this.showDialog=!0,this.$store.dispatch("setAlert","")},logout:function(){this.$store.dispatch("clearUser"),this.user.name="",this.user.email=""},authorize:function(){if(s(this.user.name||"",this.user.email||"")){var t=this.user;this.$store.dispatch("authorize",t),this.$store.dispatch("setAlert",""),this.showDialog=!1,this.$refs.navIcon.click()}},closeLoginDialog:function(){this.showDialog=!1,this.$store.dispatch("setAlert","")},toggleMobileMenu:function(){this.menuHidden=!this.menuHidden,this.$emit("toggled",this.menuHidden)}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("div",{staticClass:"header__container"},[a("div",{staticClass:"header__content"},[a("div",{staticClass:"header__brand"},[a("h1",{staticClass:"header__brand-title"},[a("i",{staticClass:"material-icons icon header__logo"},[t._v("collections")]),t._v(" "),a("router-link",{attrs:{to:{name:"home"}}},[t._v("Vue Albums")])],1)]),t._v(" "),a("transition",{attrs:{name:"zoom",mode:"out-in"}},[t.menuHidden?a("i",{key:"open",ref:"navIcon",staticClass:"header__mobile-icon icon material-icons",on:{click:function(e){e.stopPropagation(),t.toggleMobileMenu(e)}}},[t._v("menu")]):a("i",{key:"close",ref:"navIcon",staticClass:"header__mobile-icon icon material-icons",on:{click:function(e){e.stopPropagation(),t.toggleMobileMenu(e)}}},[t._v("close")])]),t._v(" "),a("div",{staticClass:"header__nav-wrapper",class:{"header__nav-wrapper--hidden-mobile":t.menuHidden}},[a("div",{staticClass:"header__login"},[a("transition",{attrs:{name:"zoom",mode:"out-in"}},[t.authorizedUser&&"undefined"!==t.authorizedUser?a("span",{key:"name",staticClass:"header__welcome-message"},[t._v("\n              Welcome "+t._s(t._f("capitalize")(t.authorizedUser.name))+"\n              "),a("i",{staticClass:"icon material-icons"},[t._v("accessibility")])]):a("span",{key:"please",staticClass:"header__welcome-message"},[t._v("Please Sign in")])]),t._v(" "),a("ul",{staticClass:"header__login-menu"},[t.authorizedUser?a("li",{staticClass:"header__login-items",on:{click:t.logout}},[a("i",{staticClass:"material-icons icon"},[t._v("power_settings_new")]),t._v(" "),a("a",[t._v("Logout")])]):a("li",{staticClass:"header__login-items",on:{click:t.login}},[a("i",{staticClass:"material-icons icon"},[t._v("perm_identity")]),t._v(" "),a("a",[t._v("Login")])])])],1),t._v(" "),a("nav",{staticClass:"header__menu"},[a("ul",{staticClass:"header__nav"},[a("li",{staticClass:"header__nav-items"},[a("router-link",{attrs:{to:{name:"users"}},nativeOn:{click:function(e){t.resetCurrent(e)}}},[a("i",{staticClass:"header__nav-icons material-icons icon"},[t._v("account_circle")]),t._v("\n              Browse Users")])],1),t._v(" "),a("li",{staticClass:"header__nav-items"},[a("router-link",{attrs:{to:{name:"allalbums"}},nativeOn:{click:function(e){t.resetCurrent(e)}}},[a("i",{staticClass:"header__nav-icons material-icons icon"},[t._v("search")]),t._v("\n              All Albums")])],1),t._v(" "),a("li",{staticClass:"header__nav-items"},[a("router-link",{attrs:{to:{name:"allimages"}},nativeOn:{click:function(e){t.resetCurrent(e)}}},[a("i",{staticClass:"header__nav-icons material-icons icon"},[t._v("camera_alt")]),t._v("\n              Random Images")])],1)])])])],1)]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.showDialog?a("Dialog",{attrs:{title:"Enter Your Name and Email",confirm:"",cancel:"Close"},on:{canceled:t.closeLoginDialog,ok:t.authorize}},[t.authorizedUser?t._e():a("AppForm",{key:"form",attrs:{alert:t.alert,title:"Unlock Your Images",icon:"vpn_key",submitButton:"Submit"},on:{clearForm:function(e){t.$store.dispatch("setAlert","")},submited:t.authorize}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"login-form__input",attrs:{type:"text",name:"name",placeholder:"Name"},domProps:{value:t.user.name},on:{keyup:function(e){t.$store.dispatch("setAlert","")},input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"login-form__input",attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:t.user.email},on:{keyup:function(e){t.$store.dispatch("setAlert","")},input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})])],1):t._e()],1)],1)},staticRenderFns:[]},k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"footer__container"},[e("p",{staticClass:"footer__text"},[e("span",{staticClass:"footer__author"},[this._v("Made by Zeljko Olah")]),this._v(" "),e("i",{staticClass:"material-icons icon footer__icon"},[this._v("whatshot")]),this._v(" "),e("span",{staticClass:"footer__copyright"},[this._v("© January 2018 --- Built with Vue, Vuex, and JSON server")])])])])}]},y={name:"app",components:{AppHeader:a("VU/8")(w,U,!1,function(t){a("2Rux")},null,null).exports,AppFooter:a("VU/8")(null,k,!1,function(t){a("xt3M")},null,null).exports},data:function(){return{hideMenu:!1}},computed:{authorizedUser:function(){return this.$store.getters.authorizedUser}},watch:{authorizedUser:function(t){null===t&&this.$router.replace({name:"home"})}},methods:{updateHideMenu:function(t){this.hideMenu=t}},created:function(){var t=this;if(this.$store.dispatch("fetchUsers"),!this.authorizedUser){var e=JSON.parse(localStorage.getItem("guestUser"));this.$store.dispatch("authorize",e)}if(!this.currentUser){var a=JSON.parse(localStorage.getItem("userId"));this.$store.dispatch("setCurrentUser",a)}if(!this.currentAlbum){var s=JSON.parse(localStorage.getItem("albumId"));this.$store.dispatch("setCurrentAlbum",s)}window.document.addEventListener("click",function(){t.hideMenu||(t.hideMenu=!0)})}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("AppHeader",{attrs:{hideMenu:this.hideMenu},on:{toggled:this.updateHideMenu}}),this._v(" "),e("div",{staticClass:"app__container"},[e("main",{staticClass:"app__page"},[e("transition",{attrs:{name:"slide",mode:"out-in"}},[e("router-view")],1)],1)]),this._v(" "),e("AppFooter")],1)},staticRenderFns:[]},$=a("VU/8")(y,P,!1,function(t){a("c92l")},null,null).exports,S=a("/ocq"),z={data:function(){return{name:"",email:""}},computed:{authorizedUser:function(){return this.$store.getters.authorizedUser},disabled:function(){return null===this.authorizedUser},alert:function(){return this.$store.getters.alert}},watch:{authorizedUser:function(t){null===this.authorizedUser&&(this.name=this.email="")}},methods:{authorize:function(){if(!s(this.name,this.email))return!1;var t={name:this.name,email:this.email};this.$store.dispatch("authorize",t),this.$store.dispatch("setAlert","")},resetCurrent:function(){this.$store.dispatch("resetCurrentData"),localStorage.removeItem("userId"),localStorage.removeItem("albumId")}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hero"},[a("div",{staticClass:"hero__wrapper"},[a("div",{staticClass:"hero__card"},[t._m(0),t._v(" "),a("div",{staticClass:"hero__card-actions"},[a("button",{staticClass:"button",attrs:{disabled:t.disabled},on:{click:function(e){t.$router.push({name:"users"})}}},[t._v("Meet Them All")])])]),t._v(" "),a("div",{staticClass:"hero__card"},[t._m(1),t._v(" "),a("div",{staticClass:"hero__card-actions"},[a("router-link",{attrs:{to:{name:"allalbums"}}},[a("button",{staticClass:"button",attrs:{disabled:t.disabled},on:{click:t.resetCurrent}},[t._v("View Now")])])],1)]),t._v(" "),a("div",{staticClass:"hero__card"},[t._m(2),t._v(" "),a("div",{staticClass:"hero__card-actions"},[a("button",{staticClass:"button",attrs:{disabled:t.disabled},on:{click:function(e){t.$router.push({name:"allimages"})}}},[t._v("Random Photos")])])])]),t._v(" "),a("transition",{attrs:{appear:"",name:"zoom",mode:"out-in"}},[t.authorizedUser?a("div",{key:"welcome",staticClass:"welcome"},[a("h1",{staticClass:"main-headline welcome__message"},[t._v("Welcome "),a("span",[t._v(t._s(t.authorizedUser.name))])])]):a("AppForm",{key:"form",attrs:{alert:t.alert,title:"Unlock Your Images",icon:"vpn_key",submitButton:"Submit"},on:{clearForm:function(e){t.$store.dispatch("setAlert","")},submited:t.authorize}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"login-form__input",attrs:{type:"text",name:"name",placeholder:"Name"},domProps:{value:t.name},on:{keyup:function(e){t.$store.dispatch("setAlert","")},input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"login-form__input",attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:t.email},on:{keyup:function(e){t.$store.dispatch("setAlert","")},input:function(e){e.target.composing||(t.email=e.target.value)}}})])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hero__card-title"},[e("h1",{staticClass:"main-headline"},[this._v("Best"),e("br"),this._v(" Photographers "),e("br"),this._v(" in the "),e("br"),this._v(" World")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hero__card-title"},[e("h1",{staticClass:"main-headline"},[this._v("Checkout "),e("br"),this._v("Huge "),e("br"),this._v("Album "),e("br"),this._v("Collection")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hero__card-title"},[e("h1",{staticClass:"main-headline"},[this._v("Enjoy New "),e("br"),this._v("Amazing "),e("br"),this._v("Photos "),e("br"),this._v("Everyday")])])}]},E=a("VU/8")(z,x,!1,function(t){a("uav8")},null,null).exports,M={computed:{users:function(){return this.$store.getters.users},loading:function(){return this.$store.getters.loading}},methods:{randomFontSize:function(t){var e=2;e=window.innerWidth>=992?2:1.5;return"fontSize: "+(Math.random()*e+1)+"rem"},setCurrentUser:function(t,e){this.$store.dispatch("setCurrentUser",t)}},created:function(){this.$store.dispatch("fetchUsers")}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"users"},[t.loading?a("modal",{attrs:{title:"Loading",overlayColor:"rgba(255,255,255, 0.8)"}},[a("loading")],1):a("div",{staticClass:"users__usernames"},[a("h1",{staticClass:"main-headline users__title"},[t._v("Users")]),t._v(" "),t.users?a("ul",{staticClass:"users__list"},t._l(t.users,function(e,s){return a("li",{key:e.id,staticClass:"users__items",style:t.randomFontSize(s),on:{click:function(a){t.setCurrentUser(e,s)}}},[a("router-link",{attrs:{to:{name:"albums",params:{userId:e.id}}}},[t._v("\n          "+t._s(e.username)+"\n        ")])],1)})):t._e()])],1)},staticRenderFns:[]},D=a("VU/8")(M,T,!1,function(t){a("g9E9")},null,null).exports,N=a("Dd8w"),L=a.n(N),F={props:["userId"],computed:L()({},Object(h.c)(["searchedAlbum","albums","userAlbums","users","currentUser","loading"]),{username:function(){return this.currentUser?this.currentUser.username:""},userById:function(){var t=this;if(this.users){return this.users.find(function(e){return e.id===Number(t.userId)})}},nameByUserId:function(){var t=this;if(this.userId&&this.users){return this.users.find(function(e){return e.id===Number(t.userId)}).username}return""},hasError:function(){if(this.searchedAlbum)return 0===this.searchedAlbum.length}}),watch:{$route:function(t){t.params.userId?this.currentUser||this.$router.replace({name:"allalbums"}):this.fetchAllAlbums()}},methods:L()({},Object(h.b)(["fetchAllAlbums","fetchUserAlbum","setCurrentAlbum","searchTerm"]),{randomFontSize:function(t){return"fontSize: "+(Math.random()+1)+"rem"},storeCurrentAlbum:function(t){this.setCurrentAlbum(t),this.searchTerm("")}}),created:function(){this.userId?this.fetchUserAlbum(this.userId):this.fetchAllAlbums()},beforeUpdate:function(){this.currentUser&&localStorage.setItem("userId",l()(this.currentUser))}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"albums"},[t.loading?a("modal",{attrs:{title:"Loading",overlayColor:"rgba(255,255,255, 0.5)"}},[a("loading")],1):t._e(),t._v(" "),t.loading?t._e():a("div",[a("div",{staticClass:"albums__names"},[a("div",{staticClass:"albums__header"},[this.userId?a("h1",{staticClass:"main-headline albums__title"},[t.userAlbums?a("span",[t._v(t._s(t.userAlbums.length))]):t._e(),t._v(" Albums by\n        "),t.username&&!t.userById?a("strong",[t._v(t._s(t.username))]):a("strong",[t._v(t._s(t.nameByUserId))])]):a("h1",{staticClass:"main-headline albums__title"},[t._v("All Albums")]),t._v(" "),a("div",{staticClass:"spacer"}),t._v(" "),a("app-search",{attrs:{placeholder:"Search Albums",title:"Search Albums",icon:"search",error:t.hasError}}),t._v(" "),a("button",{staticClass:"button albums__button--navigation",on:{click:function(e){t.$router.push({name:"users"})}}},[t._v("Users")])],1),t._v(" "),a("ul",{staticClass:"albums__list"},t._l(t.searchedAlbum,function(e,s){return a("li",{key:e.title,staticClass:"albums__items",style:t.randomFontSize(s),attrs:{title:e.title}},[a("router-link",{attrs:{to:{name:"images",params:{albumId:e.id}}},nativeOn:{click:function(a){t.storeCurrentAlbum(e)}}},[t._v(t._s(t._f("allowNameLength")(t._f("capitalize")(e.title))))])],1)}))])])],1)},staticRenderFns:[]},O=a("VU/8")(F,R,!1,function(t){a("IuiO")},null,null).exports,V=a("fZjL"),q=a.n(V),H={props:["albumId"],data:function(){return{paginatedImages:[],showDialog:!1,showModal:!1,itemToDelete:null,clickedImage:null}},computed:L()({},Object(h.c)(["users","albums","images","randomImages","currentAlbum","currentUser","loading"]),{albumImages:function(){var t=this;return this.albumId?this.images.filter(function(e){return e.albumId===Number(t.albumId)}):this.randomImages},userAlbumsRoute:function(){return this.currentAlbum?{name:"albums",params:{userId:this.currentAlbum.userId}}:{name:"allalbums"}},username:function(){var t=this.currentAlbum.userId;if(this.users)return this.users.find(function(e){return e.id===t}).username}}),watch:{$route:function(t,e){t.query.page||this.fetchAllImages(),t.params.albumId&&!t.query.page&&(this.albums.find(function(e){return e.id===t.params.userId})||this.$router.replace({name:"users"}))}},methods:L()({},Object(h.b)(["fetchAllImages","fetchAlbumImages","deleteImage","deleteAlbum","currentPaginatePage"]),{paginated:function(t){t&&(this.paginatedImages=t)},prepareDelete:function(t){this.showDialog=!0,this.itemToDelete=t},deleteImageConfirmed:function(){this.deleteImage(this.itemToDelete),this.currentPaginatePage(this.$route.query.page),this.showDialog=!1,this.itemToDelete=null},deleteEmptyAlbum:function(){var t=void 0;this.currentUser&&(t={albumId:this.albumId,userId:this.currentUser.id}),this.deleteAlbum(t),this.$router.push({name:"albums",params:{userId:this.currentUser.id}})},showImageModal:function(t,e){this.showModal=!0,this.clickedImage=t},randomize:function(){this.fetchAllImages()}}),created:function(){this.albumId?(this.fetchAlbumImages(this.albumId),this.$router.replace({name:"images",params:{albumId:this.currentAlbum.id}})):(this.fetchAllImages(),this.$router.replace({name:"allimages"}))},beforeUpdate:function(){q()(this.currentAlbum).length&&localStorage.setItem("albumId",l()(this.currentAlbum))}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"images"},[t.loading?a("modal",{attrs:{title:"Loading",overlayColor:"rgba(255,255,255, 0.5)"}},[a("loading")],1):a("div",{staticClass:"images__wrapper"},[a("div",{staticClass:"images__header"},[t.$route.params.albumId?a("h1",{staticClass:"main-headline images__title"},[t._v("\n        Album\n        "),a("em",[t.currentAlbum?a("span",[t._v('"'+t._s(t._f("allowNameLength")(t._f("capitalize")(t.currentAlbum.title),40))+'"')]):t._e()]),t._v("\n        by\n        "),t._v(" "),a("router-link",{attrs:{to:t.userAlbumsRoute}},[a("span",[t._v(t._s(t.username))])]),t._v(" "),t._v("\n        ("+t._s(t.albumImages.length)+"\n        "),t.albumImages.length>1?[t._v("images")]:[t._v("image")],t._v(")\n      ")],2):a("h1",{staticClass:"main-headline images__title"},[t._v("\n        All Images\n      ")]),t._v(" "),a("div",{staticClass:"images__actions"},[t.currentAlbum.title?a("button",{staticClass:"button images__button--navigation",on:{click:function(e){t.$router.push(t.userAlbumsRoute)}}},[t._v("Albums")]):t._e(),t._v(" "),t.currentAlbum.title?a("button",{staticClass:"button images__button--navigation",on:{click:function(e){t.$router.push({name:"users"})}}},[t._v("Users")]):[a("button",{staticClass:"button images__button--navigation",on:{click:function(e){t.$router.push({name:"allalbums"})}}},[t._v("Albums")]),t._v(" "),a("button",{staticClass:"button images__button--navigation",on:{click:t.randomize}},[t._v("Random")])]],2)]),t._v(" "),t.loading?t._e():a("div",{staticClass:"images__names"},[a("ul",{staticClass:"images__list"},t._l(t.paginatedImages,function(e,s){return a("li",{staticClass:"images__items"},[a("img",{staticClass:"images__photo",attrs:{src:e.thumbnailUrl,alt:"image.title"},on:{click:function(a){t.showImageModal(e,s)}}}),t._v(" "),t.currentUser&&t.$route.params.albumId?a("i",{staticClass:"images__icon--delete icons material-icons",on:{click:function(a){t.prepareDelete(e)}}},[t._v("delete")]):t._e()])}))]),t._v(" "),t.images?a("paginate",{attrs:{items:t.albumImages},on:{paginate:t.paginated,deleteList:t.deleteEmptyAlbum}}):t._e()],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.showDialog?a("Dialog",{attrs:{title:"Confirm Deletion",confirm:"Ok",cancel:"Cancel"},on:{ok:t.deleteImageConfirmed,canceled:function(e){t.showDialog=!1}}},[a("p",[t._v("Do you really want to delete "),a("strong",[t._v(t._s(t.itemToDelete.title))]),t._v("?")])]):t._e()],1),t._v(" "),a("transition",{attrs:{name:"zoom"}},[t.showModal?a("Modal",{attrs:{show:t.showModal,details:this.clickedImage.id,title:t._f("capitalize")(this.clickedImage.title),icon:"close"},on:{canceled:function(e){t.showModal=!1}}},[a("img",{attrs:{src:this.clickedImage.url,alt:this.clickedImage.title}})]):t._e()],1)],1)},staticRenderFns:[]},j=a("VU/8")(H,B,!1,function(t){a("2wZh")},null,null).exports;n.a.use(S.a);var J=new S.a({routes:[{path:"/",name:"home",component:E},{path:"/users",name:"users",component:D,meta:{requiresAuth:!0}},{path:"/allalbums",name:"allalbums",component:O},{path:"/albums/:userId",name:"albums",component:O,props:!0,meta:{requiresAuth:!0}},{path:"/allimages",name:"allimages",component:j},{path:"/images/:albumId",name:"images",component:j,props:!0,meta:{requiresAuth:!0}},{path:"*",component:E}]});J.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})?I.state.authorizedUser?a():a({name:"home",query:{redirect:t.fullPath}}):a()});var Y=a("9JMe"),W={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("div",{staticClass:"spinner"})])}]},X=a("VU/8")({},W,!1,function(t){a("aPfd")},"data-v-68b2bfc9",null).exports,Z={props:{placeholder:{type:String},icon:{type:String},error:{type:Boolean,default:!1}},data:function(){return{searchTerm:"",show:!1}},methods:{searchEmit:function(t){this.$store.dispatch("searchTerm",t.currentTarget.value)},showSearch:function(t){this.show=!this.show,this.show&&this.$refs.inputSearch.focus()},clearSearch:function(t){var e=this;setTimeout(function(){e.searchTerm="",e.$store.dispatch("searchTerm",""),e.show=!1},500)}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search",class:{"search--expand":t.show}},[a("div",{staticClass:"search__wrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"inputSearch",staticClass:"search__input",class:{search__error:t.error},attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.searchTerm},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.clearSearch(e)},blur:t.clearSearch,input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},t.searchEmit]}}),t._v(" "),a("i",{staticClass:"search__icon material-icons icon",on:{click:function(e){e.preventDefault(),t.showSearch(e)}}},[t._v(t._s(t.icon))]),t._v(" "),t.error&&t.show?a("div",[a("span",{staticClass:"search__info"},[t._v("No results for your search!")])]):t._e()])])},staticRenderFns:[]},G=a("VU/8")(Z,Q,!1,function(t){a("Nl94")},null,null).exports,K={props:{title:{type:String},confirm:{type:String,default:"Yes"},cancel:{type:String,default:"No"},width:{type:String}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog"},[a("div",{staticClass:"dialog__card",style:{width:t.width}},[a("div",{staticClass:"dialog__title"},[a("h1",[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"dialog__content"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"dialog__actions"},[a("button",{staticClass:"dialog__button",on:{click:function(e){t.$emit("canceled")}}},[t._v(t._s(t.cancel))]),t._v(" "),a("button",{staticClass:"dialog__button",on:{click:function(e){t.$emit("ok")}}},[t._v(t._s(t.confirm))])])])])},staticRenderFns:[]},et=a("VU/8")(K,tt,!1,function(t){a("iBmX")},null,null).exports,at={props:{details:{type:Number},title:{type:String,required:!0},icon:{type:String},overlayColor:{type:String,default:"rgba(0,0,0, 0.8)"},show:{type:Boolean,default:!1}},computed:{color:function(){return"background-color: "+this.overlayColor+";"}},mounted:function(){var t=this;document.addEventListener("keydown",function(e){t.show&&27===e.keyCode&&t.$emit("canceled")})}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",style:t.color,on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.$emit("canceled")}}},[t.icon?a("button",{staticClass:"modal__button",on:{click:function(e){t.$emit("canceled")}}},[a("i",{staticClass:"icons material-icons"},[t._v(t._s(t.icon))])]):t._e(),t._v(" "),a("div",{staticClass:"modal__card"},[a("div",{staticClass:"modal__content"},[t._t("default")],2),t._v(" "),a("div",{staticClass:"modal__title"},[a("h1",[t.details?a("span",[t._v("#"+t._s(t.details)+":")]):t._e(),t._v(" "+t._s(t.title))])])])])},staticRenderFns:[]},nt=a("VU/8")(at,st,!1,function(t){a("4EOe")},null,null).exports,it=a("woOf"),rt=a.n(it),ot={props:["items"],data:function(){return{perPage:10,currentPage:1,pageLinksCount:1,paginatedItems:[],noMoreItems:!1}},computed:{pagination:function(){if(this.items){var t=this.items.length,e=this.currentPage*this.perPage-this.perPage;return{totalImages:t,totalPages:Math.ceil(t/this.perPage),range:{from:e,to:e+this.perPage}}}},pageLinks:function(){if(this.items.length){var t=this.currentPage-this.pageLinksCount,e=this.currentPage+this.pageLinksCount,a=[];this.pagination.totalPages<3?(t=1,e=this.pagination.totalPages):(t<1&&(t=1,e=3),e>this.pagination.totalPages&&(e=this.pagination.totalPages,t=this.pagination.totalPages-2));for(var s=t;s<=e;s++)a.push(s);return a}},currentPaginatePage:function(){return this.$store.getters.currentPaginatePage}},watch:{$route:function(t){this.currentPage=parseInt(t.query.page)||1,t.query.page>this.pagination.totalPages&&this.$router.replace({name:"home"})},currentPage:function(t){this.paginate()},items:function(t,e){this.paginate(),t<e&&(this.items.length?this.items.length%10!=0?this.currentPage=this.currentPaginatePage||1:this.currentPage=this.currentPaginatePage-1:(this.currentPage=1,this.noMoreItems=!0,this.$emit("deleteList")))}},methods:{toPage:function(t){this.$router.push({query:rt()({},this.$route.query,{page:t})}),this.currentPage=t,this.$store.dispatch("currentPaginatePage",this.currentPage)},paginate:function(){this.paginatedItems=this.items.slice(this.pagination.range.from,this.pagination.range.to),this.$emit("paginate",this.paginatedItems)}},mounted:function(){this.paginate()}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t.noMoreItems?a("div",{staticClass:"pagination__no-more-items"},[a("h1",{staticClass:"images__title"},[t._v("No more images left!")])]):a("div",{staticClass:"pagination"},[a("div",{staticClass:"pagination__info"},[t._v("\n      Pages "+t._s(t.currentPage)+" of "+t._s(t.pagination.totalPages)+"\n    ")]),t._v(" "),t.pagination.totalPages>1?a("nav",{staticClass:"pagination__nav"},[a("ul",{staticClass:"pagination__list"},[a("li",{staticClass:"pagination__items"},[a("button",{staticClass:"pagination__button\n          pagination__button--symbols",attrs:{disabled:1===t.currentPage},on:{click:function(e){t.toPage(1)}}},[t._v("«")])]),t._v(" "),a("li",{staticClass:"pagination__items"},[a("button",{staticClass:"pagination__button pagination__button--symbols",attrs:{disabled:1===t.currentPage},on:{click:function(e){t.toPage(t.currentPage-=1)}}},[t._v("‹")])]),t._v(" "),t._l(t.pageLinks,function(e,s){return a("li",{staticClass:"pagination__items",class:{"pagination__items--active":t.currentPage===t.pageLinks[s]}},[a("button",{staticClass:"pagination__button",on:{click:function(a){t.toPage(e)}}},[t._v(t._s(e))])])}),t._v(" "),a("li",{staticClass:"pagination__items"},[a("button",{staticClass:"pagination__button pagination__button--symbols",attrs:{disabled:t.currentPage===t.pagination.totalPages},on:{click:function(e){t.toPage(t.currentPage+=1)}}},[t._v("›")])]),t._v(" "),a("li",{staticClass:"pagination__items"},[a("button",{staticClass:"pagination__button pagination__button--symbols",attrs:{disabled:t.currentPage===t.pagination.totalPages},on:{click:function(e){t.toPage(t.pagination.totalPages)}}},[t._v("»")])])],2)]):t._e()])])},staticRenderFns:[]},ut=a("VU/8")(ot,lt,!1,function(t){a("oPYQ")},null,null).exports,ct={props:{title:{type:String,required:!0},alert:{type:String,default:""},icon:{type:String,default:""},submitButton:{type:String,default:""}},methods:{submit:function(){this.$emit("submited")}}},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-form"},[a("form",[a("h3",{staticClass:"login-form__title"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.alert&&""!==t.alert?[a("span",{key:t.alert,staticClass:"alert"},[t._v(t._s(t.alert))])]:[a("span",{key:t.title},[t._v(t._s(t.title))])]],2)],1),t._v(" "),a("div",{staticClass:"login-form__control"},[t._t("default"),t._v(" "),a("div",{staticClass:"actions"},[a("button",{staticClass:"login-form__button",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.submit(e)}}},[a("i",{staticClass:"material-icons icon login-form__icon"},[t._v(t._s(t.icon))])])])],2)])])},staticRenderFns:[]},dt=a("VU/8")(ct,mt,!1,function(t){a("soTF")},null,null).exports;Object(Y.sync)(I,J),n.a.component("Loading",X),n.a.component("AppSearch",G),n.a.component("Dialog",et),n.a.component("Modal",nt),n.a.component("Paginate",ut),n.a.component("AppForm",dt),n.a.filter("capitalize",function(t){if(t)return t.charAt(0).toUpperCase()+t.slice(1)}),n.a.filter("allowNameLength",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=t.split("").slice(0,e).join("");return a.length>=e?a+"...":a}),n.a.config.productionTip=!1,new n.a({el:"#app",router:J,store:I,render:function(t){return t($)}})},Nl94:function(t,e){},aPfd:function(t,e){},c92l:function(t,e){},g9E9:function(t,e){},iBmX:function(t,e){},oPYQ:function(t,e){},soTF:function(t,e){},uav8:function(t,e){},xt3M:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e962484a152c28a60e2e.js.map